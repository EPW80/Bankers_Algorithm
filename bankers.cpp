#include <iostream>
#include <fcntl.h>
#include <unistd.h>
#include <cstdio>
#include <pthread.h>

#include "semaphore_layer.h"
#include "vector_.h"
#include "bank.h"
#include "process.h"

#define N_PROCESSES 20

semaphore_t mutex;

std::string yes_or_no(const std::string & msg, bool condition) {
  std::string result = msg;
  return result + std::string((condition ? "YES" : "no"));
}

void * run_simulation(void * x) {
  Process * p = (Process * ) x;
  Bank * bank = p -> bank();
  int pid = p -> pid();

  semaphore_wait( & mutex);
  std::cout << ".......... .......... .......... starting run simulation... for process #" << pid << "\n\n";
  semaphore_signal( & mutex);

  vector_ < int > request;
  bool finished = false;
  int count = 20;

  while (!finished && count--> 0) {
    semaphore_wait( & mutex);
    request = p -> make_request();
    bool request_granted = bank -> grant_request(pid, request);
    if (request_granted) {
      if (p -> has_all_resources()) {
        bank -> resources() += p -> alloc();
        p -> release_all_resources();
        std::cout << "    Process " << pid << ": all resources acquired, releasing them and shutting down...\n";
        finished = true;
      }
      std::cout << * bank << "\n";
    }
    semaphore_signal( & mutex);
  }
  pthread_exit(NULL);
}

int main(int argc,
  const char * argv[]) {
  srand(static_cast<unsigned int>(time(NULL))); // Seed the random number generator once
  int fd = open("tst1.txt", O_RDONLY); // needed for debugging using vsCode
  dup2(fd, fileno(stdin)); //    don't forget to clean up at bottom

  pthread_attr_t attr;
  mutex = semaphore_create( & mutex, 1); // sem_init(&mutex, 0, 1);

  int n_proc = 0, n_res = 0;
  std::cin >> n_proc >> n_res;
  std::cout << n_proc << " processes  and  " << n_res << " resources\n";

  pthread_t threads[N_PROCESSES];

  Bank * bank = new Bank(n_proc, n_res); // create bank

  vector_ < int > resources_input(n_res); // Read resources from cin and add them to bank
  std::cin >> resources_input;
  bank -> add_resources(resources_input);

  for (int i = 0; i < n_proc; ++i) { // Create processes and add them to bank
    Process * p = new Process(i, n_res, bank);
    bank -> add_process(p);
  }

  std::cout << * bank << "\n";

  pthread_attr_init( & attr);
  for (int i = 0; i < n_proc; ++i) {
    pthread_create( & threads[i], & attr, run_simulation, (void * ) bank -> process(i));
  }

  for (int i = 0; i < n_proc; ++i) {
    pthread_join(threads[i], NULL);
  }
  delete bank; // clean up memory 
  semaphore_destroy( & mutex);

  close(fd); // needed for debugging with vsCode
  freopen("/dev/tty/", "r", stdin);

  return 0;
}

// 12 processes  and  4 resources
// +---------------------------------------------------------
// |   Bank avail: [26  24  24  18]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  4  2  1    2  2  5  2
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    2  1  3  -    2  2  2  1
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    5  6  7  3    3  4  2  1    2  2  5  2
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #0

// .......... .......... .......... starting run simulation... for process #2

// .......... .......... .......... starting run simulation... for process #3

// P #3 request: [2  1  1  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [42  42  36  31]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  4  2  1    2  2  5  2
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    4  2  4  1    -  1  1  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    5  6  7  3    3  4  2  1    2  2  5  2
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// P #3 request: [-  -  -  -] is: rejected (request is zero)
// P #3 request: [-  -  -  -] is: rejected (request is zero)
// P #0 request: [-  2  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [61  57  51  44]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    4  2  4  1    -  1  1  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    5  6  7  3    3  4  2  1    2  2  5  2
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #8

// .......... .......... .......... starting run simulation... for process #1

// .......... .......... .......... starting run simulation... for process #10

// .......... .......... .......... starting run simulation... for process #11

// P #11 request: [1  1  1  1] is: GRANTED
//     Process 11: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [83  80  68  60]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    4  2  4  1    -  1  1  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    5  6  7  3    3  4  2  1    2  2  5  2
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #6

// P #6 request: [-  2  3  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [101  97  80  74]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    4  2  4  1    -  1  1  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    5  6  7  3    3  6  5  1    2  -  2  2
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #6 request: [2  -  1  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [117  116  94  87]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    4  2  4  1    -  1  1  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    5  6  7  3    5  6  6  2    -  -  1  1
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #6 request: [-  -  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [135  135  109  100]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    4  2  4  1    -  1  1  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    5  6  7  3    5  6  6  3    -  -  1  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #6 request: [-  -  -  -] is: rejected (request is zero)
// P #6 request: [-  -  1  -] is: GRANTED
//     Process 6: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [158  160  130  117]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    4  2  4  1    -  1  1  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #1 request: [1  1  -  -] is: GRANTED
//     Process 1: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [176  179  145  131]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    4  2  4  1    -  1  1  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #3 request: [-  1  1  -] is: GRANTED
//     Process 3: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [192  196  158  143]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    2  3  2  3    1  2  1  2    1  1  1  1
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #10 request: [1  1  1  1] is: GRANTED
//     Process 10: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [204  211  167  154]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #4

// P #4 request: [1  1  1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [213  221  173  161]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    2  3  2  2    -  -  -  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #4 request: [-  -  -  1] is: GRANTED
//     Process 4: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [225  235  182  170]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  6  2  2    2  -  5  1
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #0 request: [1  -  2  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [231  240  185  175]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    4  6  4  2    1  -  3  1
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #0 request: [-  -  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [238  245  190  179]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    4  6  4  3    1  -  3  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #0 request: [1  -  3  -] is: GRANTED
//     Process 0: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [249  256  199  187]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #2 request: [-  1  3  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [255  259  201  191]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  2  3  1    1  1  1  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #2 request: [1  1  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [260  262  206  194]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    2  3  3  2    -  -  1  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #2 request: [-  -  1  -] is: GRANTED
//     Process 2: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [268  269  214  200]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  -    2  2  2  1
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #9

// P #9 request: [-  -  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [272  272  216  203]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    2  1  3  1    2  2  2  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #9 request: [2  -  1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [274  275  217  207]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    4  3  5  1    4  1  4  1    -  2  1  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #9 request: [-  2  1  -] is: GRANTED
//     Process 9: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [282  279  223  212]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #8 request: [-  2  1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [285  279  224  215]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    1  3  1  1    1  -  3  1
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #8 request: [1  -  3  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [287  281  223  218]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    2  3  4  2    2  3  4  1    -  -  -  1
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #8 request: [-  -  -  1] is: GRANTED
//     Process 8: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [292  286  229  222]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #5

// P #5 request: [1  -  -  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [293  288  231  224]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    2  -  -  1    -  1  1  1
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #5 request: [-  1  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [295  289  233  225]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    2  1  1  2    2  1  -  2    -  -  1  -
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #5 request: [-  -  -  -] is: rejected (request is zero)
// P #5 request: [-  -  -  -] is: rejected (request is zero)
// P #5 request: [-  -  -  -] is: rejected (request is zero)
// P #5 request: [-  -  -  -] is: rejected (request is zero)
// P #5 request: [-  -  -  -] is: rejected (request is zero)
// P #5 request: [-  -  1  -] is: GRANTED
//     Process 5: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [299  292  235  229]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 8    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #7

// P #7 request: [1  -  -  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [298  292  235  229]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    3  3  2  2    3  2  2  2    -  1  -  -
// | P# 8    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #7 request: [-  -  -  -] is: rejected (request is zero)
// P #7 request: [-  -  -  -] is: rejected (request is zero)
// P #7 request: [-  1  -  -] is: GRANTED
//     Process 7: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [301  294  237  231]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 6    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 7    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 8    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 9    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P#10    -  -  -  -    -  -  -  -    -  -  -  -
// | P#11    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// epw@EPWPC:~/bankersalgorithm$ ./bankers < data/medium.txt
// 6 processes  and  4 resources
// +---------------------------------------------------------
// |   Bank avail: [13  12  12  9]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    3  4  2  1    2  2  5  2
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    2  1  3  -    2  2  2  1
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #0

// P #0 request: [2  2  2  2] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [18  16  16  13]
// +---------------------------------------------------------
// | P# 0    5  6  7  3    5  6  4  3    -  -  3  -
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    2  1  3  -    2  2  2  1
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// P #0 request: [-  -  -  -] is: rejected (request is zero)
// P #0 request: [-  -  3  -] is: GRANTED
//     Process 0: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [30  28  26  22]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    2  1  3  -    2  2  2  1
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #3

// P #3 request: [1  2  2  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [34  31  27  28]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    3  3  5  -    1  -  -  1
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// P #3 request: [-  -  -  -] is: rejected (request is zero)
// P #3 request: [-  -  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [39  36  30  33]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    4  3  5  1    3  3  5  1    1  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// P #3 request: [-  -  -  -] is: rejected (request is zero)
// P #3 request: [1  -  -  -] is: GRANTED
//     Process 3: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [47  44  38  40]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    3  3  2  2    2  2  2  2    1  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #1

// P #1 request: [1  -  -  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [49  47  39  44]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    3  3  2  2    3  2  2  2    -  1  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// P #1 request: [-  -  -  -] is: rejected (request is zero)
// P #1 request: [-  1  -  -] is: GRANTED
//     Process 1: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [55  52  42  50]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  -  -  1    1  1  1  1
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #5

// P #5 request: [-  1  -  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [57  54  43  53]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  1  -  1    1  -  1  1
// +---------------------------------------------------------


// P #5 request: [-  -  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [59  57  44  55]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  1  -  2    1  -  1  -
// +---------------------------------------------------------


// P #5 request: [-  -  1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [61  60  44  58]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    2  1  1  2    1  1  1  2    1  -  -  -
// +---------------------------------------------------------


// P #5 request: [1  -  -  -] is: GRANTED
//     Process 5: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [64  64  46  63]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  1  -  1    1  2  4  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #2

// P #2 request: [-  2  1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [65  64  46  65]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  3  1  1    1  -  3  1
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #2 request: [-  -  2  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [66  66  45  66]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  3  4  2    1  3  3  2    1  -  1  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #2 request: [-  -  -  -] is: rejected (request is zero)
// P #2 request: [1  -  1  -] is: GRANTED
//     Process 2: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [68  71  49  70]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  1  2    1  1  1  1
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #4

// P #4 request: [-  -  1  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [68  71  48  69]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  2  2  3    1  1  -  -
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #4 request: [-  1  -  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [68  70  48  69]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    2  3  2  3    1  3  2  3    1  -  -  -
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// P #4 request: [-  -  -  -] is: rejected (request is zero)
// P #4 request: [-  -  -  -] is: rejected (request is zero)
// P #4 request: [1  -  -  -] is: GRANTED
//     Process 4: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [69  73  50  72]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 3    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 4    -  -  -  -    -  -  -  -    -  -  -  -
// |
// | P# 5    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


// epw@EPWPC:~/bankersalgorithm$ ./bankers < data/small.txt
// 4 processes  and  3 resources
// +---------------------------------------------------------
// |   Bank avail: [7  7  8]
// +---------------------------------------------------------
// | P# 0    3  3  3    3  2  1    -  1  2
// | P# 1    2  2  2    1  2  1    1  -  1
// | P# 2    1  3  1    1  1  1    -  2  -
// | P# 3    1  1  1    -  -  1    1  1  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #0

// P #0 request: [-  1  2] is: GRANTED
//     Process 0: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [12  12  12]
// +---------------------------------------------------------
// | P# 0    -  -  -    -  -  -    -  -  -
// | P# 1    2  2  2    1  2  1    1  -  1
// | P# 2    1  3  1    1  1  1    -  2  -
// | P# 3    1  1  1    -  -  1    1  1  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #1

// P #1 request: [-  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [13  13  13]
// +---------------------------------------------------------
// | P# 0    -  -  -    -  -  -    -  -  -
// | P# 1    2  2  2    1  2  2    1  -  -
// | P# 2    1  3  1    1  1  1    -  2  -
// | P# 3    1  1  1    -  -  1    1  1  -
// +---------------------------------------------------------


// P #1 request: [-  -  -] is: rejected (request is zero)
// P #1 request: [-  -  -] is: rejected (request is zero)
// P #1 request: [1  -  -] is: GRANTED
//     Process 1: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [15  16  17]
// +---------------------------------------------------------
// | P# 0    -  -  -    -  -  -    -  -  -
// | P# 1    -  -  -    -  -  -    -  -  -
// | P# 2    1  3  1    1  1  1    -  2  -
// | P# 3    1  1  1    -  -  1    1  1  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #2

// P #2 request: [-  -  -] is: rejected (request is zero)
// P #2 request: [-  -  -] is: rejected (request is zero)
// P #2 request: [-  2  -] is: GRANTED
//     Process 2: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [16  17  19]
// +---------------------------------------------------------
// | P# 0    -  -  -    -  -  -    -  -  -
// | P# 1    -  -  -    -  -  -    -  -  -
// | P# 2    -  -  -    -  -  -    -  -  -
// | P# 3    1  1  1    -  -  1    1  1  -
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #3

// P #3 request: [-  -  -] is: rejected (request is zero)
// P #3 request: [-  1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [16  16  19]
// +---------------------------------------------------------
// | P# 0    -  -  -    -  -  -    -  -  -
// | P# 1    -  -  -    -  -  -    -  -  -
// | P# 2    -  -  -    -  -  -    -  -  -
// | P# 3    1  1  1    -  1  1    1  -  -
// +---------------------------------------------------------


// P #3 request: [1  -  -] is: GRANTED
//     Process 3: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [16  17  20]
// +---------------------------------------------------------
// | P# 0    -  -  -    -  -  -    -  -  -
// | P# 1    -  -  -    -  -  -    -  -  -
// | P# 2    -  -  -    -  -  -    -  -  -
// | P# 3    -  -  -    -  -  -    -  -  -
// +---------------------------------------------------------



// epw@EPWPC:~/bankersalgorithm$ ./bankers < data/tinier.txt
// 4 processes  and  1 resources
// +---------------------------------------------------------
// |   Bank avail: [8]
// +---------------------------------------------------------
// | P# 0    3    2    1
// | P# 1    4    1    3
// | P# 2    2    1    1
// | P# 3    4    2    2
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #1

// .......... .......... .......... starting run simulation... for process #2

// .......... .......... .......... starting run simulation... for process #0

// P #0 request: [1] is: GRANTED
//     Process 0: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [14]
// +---------------------------------------------------------
// | P# 0    -    -    -
// | P# 1    4    1    3
// | P# 2    2    1    1
// | P# 3    4    2    2
// +---------------------------------------------------------


// P #1 request: [1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [16]
// +---------------------------------------------------------
// | P# 0    -    -    -
// | P# 1    4    2    2
// | P# 2    2    1    1
// | P# 3    4    2    2
// +---------------------------------------------------------


// P #1 request: [1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [18]
// +---------------------------------------------------------
// | P# 0    -    -    -
// | P# 1    4    3    1
// | P# 2    2    1    1
// | P# 3    4    2    2
// +---------------------------------------------------------


// P #1 request: [1] is: GRANTED
//     Process 1: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [24]
// +---------------------------------------------------------
// | P# 0    -    -    -
// | P# 1    -    -    -
// | P# 2    2    1    1
// | P# 3    4    2    2
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #3

// P #3 request: [1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [24]
// +---------------------------------------------------------
// | P# 0    -    -    -
// | P# 1    -    -    -
// | P# 2    2    1    1
// | P# 3    4    3    1
// +---------------------------------------------------------


// P #3 request: [1] is: GRANTED
//     Process 3: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [28]
// +---------------------------------------------------------
// | P# 0    -    -    -
// | P# 1    -    -    -
// | P# 2    2    1    1
// | P# 3    -    -    -
// +---------------------------------------------------------


// P #2 request: [-] is: rejected (request is zero)
// P #2 request: [-] is: rejected (request is zero)
// P #2 request: [1] is: GRANTED
//     Process 2: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [29]
// +---------------------------------------------------------
// | P# 0    -    -    -
// | P# 1    -    -    -
// | P# 2    -    -    -
// | P# 3    -    -    -
// +---------------------------------------------------------


// epw@EPWPC:~/bankersalgorithm$ ./bankers < data/tiny.txt
// 3 processes  and  2 resources
// +---------------------------------------------------------
// |   Bank avail: [9  9]
// +---------------------------------------------------------
// | P# 0    3  3    2  1    1  2
// | P# 1    4  3    3  3    1  -
// | P# 2    2  2    1  1    1  1
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #0

// P #0 request: [1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [12  13]
// +---------------------------------------------------------
// | P# 0    3  3    3  1    -  2
// | P# 1    4  3    3  3    1  -
// | P# 2    2  2    1  1    1  1
// +---------------------------------------------------------


// P #0 request: [-  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [16  16]
// +---------------------------------------------------------
// | P# 0    3  3    3  2    -  1
// | P# 1    4  3    3  3    1  -
// | P# 2    2  2    1  1    1  1
// +---------------------------------------------------------


// P #0 request: [-  -] is: rejected (request is zero)
// .......... .......... .......... starting run simulation... for process #2

// .......... .......... .......... starting run simulation... for process #1

// P #1 request: [1  -] is: GRANTED
//     Process 1: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [23  22]
// +---------------------------------------------------------
// | P# 0    3  3    3  2    -  1
// | P# 1    -  -    -  -    -  -
// | P# 2    2  2    1  1    1  1
// +---------------------------------------------------------


// P #2 request: [1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [25  24]
// +---------------------------------------------------------
// | P# 0    3  3    3  2    -  1
// | P# 1    -  -    -  -    -  -
// | P# 2    2  2    2  1    -  1
// +---------------------------------------------------------


// P #2 request: [-  -] is: rejected (request is zero)
// P #2 request: [-  -] is: rejected (request is zero)
// P #2 request: [-  -] is: rejected (request is zero)
// P #2 request: [-  1] is: GRANTED
//     Process 2: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [30  27]
// +---------------------------------------------------------
// | P# 0    3  3    3  2    -  1
// | P# 1    -  -    -  -    -  -
// | P# 2    -  -    -  -    -  -
// +---------------------------------------------------------


// P #0 request: [-  -] is: rejected (request is zero)
// P #0 request: [-  -] is: rejected (request is zero)
// P #0 request: [-  1] is: GRANTED
//     Process 0: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [33  29]
// +---------------------------------------------------------
// | P# 0    -  -    -  -    -  -
// | P# 1    -  -    -  -    -  -
// | P# 2    -  -    -  -    -  -
// +---------------------------------------------------------


// epw@EPWPC:~/bankersalgorithm$ ./bankers < data/tst1.txt
// 3 processes  and  4 resources
// +---------------------------------------------------------
// |   Bank avail: [4  6  4  5]
// +---------------------------------------------------------
// | P# 0    3  2  3  4    2  2  1  2    1  -  2  2
// | P# 1    2  3  2  3    1  2  1  1    1  1  1  2
// | P# 2    2  4  2  3    2  2  1  2    -  2  1  1
// +---------------------------------------------------------


// .......... .......... .......... starting run simulation... for process #0

// .......... .......... .......... starting run simulation... for process #2

// .......... .......... .......... starting run simulation... for process #1

// P #1 request: [1  1  1  2] is: GRANTED
//     Process 1: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [9  12  7  10]
// +---------------------------------------------------------
// | P# 0    3  2  3  4    2  2  1  2    1  -  2  2
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  4  2  3    2  2  1  2    -  2  1  1
// +---------------------------------------------------------


// P #0 request: [1  -  2  2] is: GRANTED
//     Process 0: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [13  16  9  14]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  4  2  3    2  2  1  2    -  2  1  1
// +---------------------------------------------------------


// P #2 request: [-  1  -  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [13  15  9  14]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  4  2  3    2  3  1  2    -  1  1  1
// +---------------------------------------------------------


// P #2 request: [-  -  1  -] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [13  15  8  14]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  4  2  3    2  3  2  2    -  1  -  1
// +---------------------------------------------------------


// P #2 request: [-  -  -  1] is: GRANTED
// +---------------------------------------------------------
// |   Bank avail: [13  15  8  13]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    2  4  2  3    2  3  2  3    -  1  -  -
// +---------------------------------------------------------


// P #2 request: [-  -  -  -] is: rejected (request is zero)
// P #2 request: [-  1  -  -] is: GRANTED
//     Process 2: all resources acquired, releasing them and shutting down...
// +---------------------------------------------------------
// |   Bank avail: [15  18  10  16]
// +---------------------------------------------------------
// | P# 0    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 1    -  -  -  -    -  -  -  -    -  -  -  -
// | P# 2    -  -  -  -    -  -  -  -    -  -  -  -
// +---------------------------------------------------------


